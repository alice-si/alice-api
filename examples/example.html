<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">

        <title>API Alice example</title>
        <meta name="description" content="API Alice usage simple example">
        <meta name="author" content="alex@alice.si">
        <link rel="shortcut icon" type="image/png" href="https://s3.eu-west-2.amazonaws.com/alice-res/favicon.ico"/>
    </head>

    <body>
        <script src='../alice.js'></script>
        <script>
            function generateEmail() {
                return Math.random().toString(36).substring(7) + Math.random().toString(36).substring(7) + '@gmail.com'
            }

            function test (amount) {
                let email = generateEmail();
                console.log(`Generated email ${email}`);
                let donation = {
                    email,
                    projectCode: 'save-from-abuse',
                    amount: amount * 100,
                    cardData: {
                        number: '3569990000000132',
                        expirationDate: '1120',
                        cvc: '123'
                    }
                };
                console.log('Sending donation');
                return Alice.sendDonation(donation);
            }

            window.addEventListener("load", async function (event) {
                console.log('SIMPLE DONATION EXAMPLE');
                await test(10.4);
                console.log('BIG (3DS) DONATION EXAMPLE');
                await test(100); // 3DS password: secret3
            });

        </script>
    </body>
</html>